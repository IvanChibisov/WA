module Workarea
  decorate Admin::OrderViewModel, with: :b2b do
    def account
      return unless account_id.present?
      return @account if defined?(@account)

      @account = Admin::AccountViewModel.wrap(
        Organization::Account.find(account_id),
        options
      )
    rescue Mongoid::Errors::DocumentNotFound
      @account = nil
    end
  end
end
