module Workarea
  decorate SaveUserOrderDetails, with: :b2b do
    def save_payment_details(order, user)
      account = Organization::Account.find(order.account_id) rescue nil
      return if account&.require_account_payment?
      super
    end

    def save_shipping_details(order, user)
      account = Organization::Account.find(order.account_id) rescue nil
      return if account&.require_account_address?
      super
    end
  end
end
